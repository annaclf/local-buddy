<section class="header">
  <h3 id="username" class="align-middle pt-3">@{{this.username}}</h3>
  <div style="background: linear-gradient(to bottom, rgba(0,0,0,0),rgba(0,0,0,0), rgba(0,0,0,1)), url('{{this.avatarUrl}}') no-repeat center; background-size: cover;" class="user-pic container">
    <table style="height: 100%;">
        <tr>
          <td class="align-bottom header-name">
            <h2 class="fullname">{{this.fullname}}</h2>
            <p class="city">{{this.city}}</p>
            <p><i>{{this.highlights}}</i></p>
          </td>
        </tr>
    </table>
  </div>

</section>

<section class="container mt-3">

    <div class="row info-icons text-center">
        {{#if this.category}}
          <div class="col">
            <i class="fas fa-map-marked-alt fa-2x"></i>            
            <p class="icon-text">{{this.category}}</p>
          </div>
        {{/if}}


        {{#if this.typeBeds}}
          <div class="col">
            <i class="fas fa-bed fa-2x"></i>
            <p class="icon-text">{{this.typeBeds}}</p>

            </div>
        {{/if}}

        {{#if this.transport}}
        <div class="col">
          <i class="fas fa-car  fa-2x"></i>
          <p class="icon-text">{{this.transport}}</p>
          </div>
        {{/if}}
      </div>


    </div>
</section>

<div class="container">
    <div class="row mt-1">
      <div class="col-md-7">
        <h2 class="mt-2">About me</h2>
        <p>{{this.biography}}</p>
        <h2 class="mt-2">My location</h2>
        <div id='map' style='width: auto; height: 200px;'></div>
      </div>
      <div class="col-md-4 ml-auto">
        <section class="book-section">
          <h2>Book this Buddy</h2>
          <form action="/buddies/{{this.id}}/book">
            <div class="form-group row">
              <div class="col-6">
                <label for="startDate">From</label>
                <input class="form-control date-input" type="date" value="" name="startDate" id="startDate">
              </div>
              <div class="col-6">
                <label for="endDate">To</label>
                <input class="form-control date-input" type="date" value="" name="endDate" id="endDate">
              </div>
            </div>
            <div class="form-group row">
              <div class="col">
                <button type="submit" id="book-buddy" class="btn btn-lg btn-primary btn-block">Book</button>
              </div>
            </div>
          </form>
        </section>
        {{#if messages.length}}
          {{#each messages}}<p>{{this}}</p>{{/each}}
        {{/if}}
      </div>
    </div>

  </div>

  <input type="hidden" id='center' value='{{this.location.coordinates}}'>
  


<script src='https://api.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.js'></script>
<script>

const coordinatesArray = document.getElementById('center').value.split(',');
 mapboxgl.accessToken = 'pk.eyJ1IjoiaGNvcnRhIiwiYSI6ImNqa2N5ZGdsbjBicHUzcG8wNXEycG4xa3EifQ.L806Ib3WtffrlfOnIf-dcA';
  let map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v9',
    zoom: 12,
    center: coordinatesArray
  });

  var marker = new mapboxgl.Marker()
  .setLngLat(coordinatesArray)
  .addTo(map);

</script>